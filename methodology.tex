\section{Methodology}

This preliminary study tries to measure power consumption for a couple of EAs, Genetic Algorithms (GA) and Genetic Programming (GP).

Given the stochastic nature of this kind of algorithms, we firstly decided to run each of the experiment 30 times so that the average can be computed as an estimation of the algorithm behavior.  On the other hand, and given that different hardware platforms will be tested, we decided to choose 30 random seeds so that all of the runs are exactly the same in every platform, when considering high level operations defined in the high level programming language.

On the other hand, and given the influence of computing time in the total ammount of energy consumed by the algorithm, we configured the main loop of the algorithm to finish when a required level of solution quality is reached. We are thus mainly interested in the average computing time for the 30 runs, together with the energy consumed along that time.  The only differences that may arise are due to hardware differences:  instruction set architecture, processor speed, etc;  % also the operating system architecture affects  -  pedro
features that are not in the focus of this work.  Nevertheless, theses differences may influence future decission on the preferred hardware for the algorithms.  

We must also mention the interest in studying some of the main parameters of the algorithm:  they have a well-known impact on the time to find solutions, and may thus also directly, or indirectly influence the energy consumed to reach that solution.  In this preliminary study we have focused on population size and have tested several values for each of the algorithms tested.

In order to maket it easy the compilation processes in every hardware platform, we have selected on the one hand a simple GA \cite{michalewicz} with a simple C-implementation \cite{web_algoritmo}, and on the other hand lilgp for GP \cite{lilgp}.  Table~\ref{Table:devices} provide detals for hardware architectures tested.

 
\begin{table}
\renewcommand{\arraystretch}{1.3}
\centering
\caption{Devices}
\label{Table:devices}
\begin{tabular}{cccc} \hline
Device&Processor&Cores&RAM\\ \hline
Raspberry Pi& Cortex-A7 (900 Mhz)& 4 &1GB \\
Laptop & Intel(R) Core(TM) i5-2450M (2.50GHz)&4&8GB\\
Xilinx SoC & ZYNQ-7000 ZC702 (50Mhz) & & \\
Smartphone & Qualcomm & & \\
Samsung Galaxy Note 3 & Snapdragon 800 (2.3Ghz) & 4 & 3Gb \\
% this table should be updated with the information about the Android tablet:
%   SAMSUNG GALAXY TAB-3 (SM-T311)
%   Android 4.4.2
%   Kernel 3.0.31
%   CPU 1.5 GHz dual core
%   Samsung Exynos 4212 Dual SoC processor
%   1.5GB RAM
\hline
\end{tabular}
\end{table}

Given differences among hardware devices, we have employed different means  % means???  
for measuring energy consumed by each of the algorithms.  Regarding the desktop PC and raspberry pi, we have employed a voltimeter for meassuring total consumption of the device in two different scenaries:  (i) when the algorithm is not running and (ii) when the algorithm is running.  Given that \textit{current intensity} values remain constant in every case, we can obtain the measure for the algorithm by simply substracting both values for a given device.  This value together with electric tension allows us to compute watts consumed.

When android devices are considered, such as smartphones or tablets, we have employed  \textit{PowerTutor} \cite{powertutor},\cite{powertutor2}. This app allows to check energy consumption for every process run.

With that information, we can compute kilowats-hour (kwh).  This will be our main measure to compare the behavior of the algorithm in every hardware platform.

%Para realizar la experimentación, y tal como se describe en la sección previa, en primer lugar  hemos seleccionado el conjunto de dispositivos descritos en la Tabla~\ref{Table:devices}. 

Regarding the problems selected for the experimental stage, we have selected one of the test problems provided with each of the software tools selected:  the multiplexer problem provided with lilgp on the one hand, and an scalar function -check ~\ref{eq:fitness}-  with five variables to be optimized. 

%Por otro lado, el problema a resolver es la búsqueda del valor máximo en una función escalar $\textbf{F}$ definida por cinco variables, siguiendo las directrices presentadas en~\cite{michalewicz}. Cada uno de estos valores, proporcionados como parámetro, deben estar comprendidos entre un valor mínimo y uno máximo. El objetivo es encontrar los valores óptimos de las cinco variables para que la función $F$ alcance un valor máximo dado. La función de fitness se especifica en la Ecuación~\ref{eq:fitness}.

Main parameters for the GA are described in Table~\ref{Table:par_genetico}.  The upper limit for generation number is  $10000$, stopping the run when the best individuals is ($0,999\%$) near the optimal solution. Four population sizes have been tested.

When the Xilinx FPGA has been tested using the evaluation kit described in Table~\ref{Table:devices} to compile the GA algorithm. Given the way the algorithms are converted into hardware components, the stop criteria cannot be applied, and instead, the average number of generations computed in other hardware platforms has been employed as the upper limit for the run, given that the same random seeds will produce the same high level operations for the algorithm.  The total ammount of generation for population sizes of 50, 100, 500 and 1000 individulas are  6505, 5859, 2732 y 1684, respectively.


%Las características particulares del entorno donde se implementa el algoritmo se especifican en la Tabla~\ref{Table:devices}.

\begin{table}
\renewcommand{\arraystretch}{1.3}
\centering
\caption{FPGA hardware}
\label{Table:fpga}
\begin{tabular}{cc} \hline
  Versión & Vivado v.2015.4 (win64) Build 1412921 Wed Nov 18 09:43:45 MST 2015 \\ 
  Dispositivo & xc7z020clg484-1\\
\hline
\end{tabular}
\end{table}

When the FPGA SoC ZC702 has been employed, together with the IP module required for the algorithm, a proprietary Xilnx IP module was required to launch and connect the algorithm with input/output.  This means that a number of extra hardware resources are required (LUT, LUTRAM, FF, BRAM, DSP, BUFG) which will increase power consumption.  

%\begin{table}
%\renewcommand{\arraystretch}{1.3}
%\centering
%\caption{Característica de los dispositivos.}
%\label{Table:devices}
%\begin{tabular}{cccc} \hline
%Dispositivo&Procesador&Núcleos&RAM\\ \hline
%Raspberry Pi& Cortex-A7 (900 Mhz)& 4 &1GB \\
%Laptop & Intel(R) Core(TM) i5-2450M (2.50GHz)&4&8GB\\
%Xilinx ZYNQ-7000 SoC ZC702 (50Mhz) & & \\
%\hline
%\end{tabular}
%\end{table}

\begin{equation}
\label{eq:fitness}
 F=x_{1}^{4} + (x_{2}^{3} * x_{3}^{2}) - (x_{3} * x_{4}) + x_{5} 
\end{equation}


\begin{table}
\renewcommand{\arraystretch}{1.3}
\centering
\caption{Main GA Parameters.}
\label{Table:par_genetico}
\begin{tabular}{cc}
\hline
%Max number of generation & $10000$ \\
Max number of generation & $500$ \\
%Population sizes & $50$,$100$,$500$,$1000$ \\
Population sizes & $100$,$200$,$400$,$500$,$1000$ \\
Crossover probability & $0.8$ \\ 
Mutation probability & $0.15$ \\ 
\hline
\end{tabular}
\end{table} 