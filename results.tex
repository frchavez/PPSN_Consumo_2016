\section{Results}
\label{results}

Con el objetivo de medir el consumo de energía en los dispositivos anteriormente mencionados, se han seleccionado varios procedimientos que se describen a continuación. Las 
mediciones tanto para el dispositivo \textit{Raspberry Pi} como el \textit{laptop} se han realizado haciendo uso de un multímetro que nos aporta, entre otros datos, el 
consumo medio de potencia. %El multímetro utilizado se muestra en la~\figurename{\ref{fig:voltimetro}}. 
Para cada experimento realizado, se muestra información relativa al 
consumo en vatios (w), el tiempo de ejecución (seg) y el consumo total en Kilovatios hora (kwh). Este último es la medida estándar de facturación utilizada por las compañías eléctricas.

La medición realizada en la FPGA, y teniendo en cuenta que en esta no hay sistema operativo, ni procesos que se ejecuten concurrentemente con el algoritmo implementado, se realiza con una medición basada en el número de ciclos de reloj que se utilizan para ejecutar el algoritmo, teniendo éste como única entrada el valor de la semilla aleatoria, y como como valor de salida, el valor del fitness del mejor individuo. El número de ciclos se multiplica por la duracion del ciclo de reloj (10ns) obteniéndose la duración en segundos de la ejecución del algoritmo para un valor de entrada, es decir una semilla. Multiplicando por el número de semillas (la implementación hardware no cambia al variar la semilla) se obtienen resultados adecuados para su comparación con los demás dispositivos. El consumo (en watios) se obtiene a partir del informe de consumo de la herramienta Vivado de Xilinx (~\ref{fig:consumo}). 

%\begin{figure}[ht]%
	%\centering
 	%\includegraphics[width=0.3\textwidth]{./Resultados/consumos.pdf}
 	%\caption{Consumo (w) del SoC en la implementación final del algoritmo.}
  %\label{fig:consumo} 
%\end{figure}



%\begin{figure}[ht]%
	%\centering
 	%\includegraphics[width=0.3\textwidth]{./Resultados/voltimetro.pdf}
 	%\caption{Voltímetro utilizado para la toma de medidas de potencia en los resultados experimentales.}
  %\label{fi:voltimetro} 
%\end{figure}


Table~\ref{Table:result_todos} shows results obtained with a population size of 100, 200, 400, 500 and y 1000 individuals, respectively. 
\begin{small}
 
\begin{table}[!ht]
\renewcommand{\arraystretch}{1.3}
\centering
\caption{Experimental results}
\label{Table:result_todos}
\begin{tabular}{ccccc} \hline
Device & Consumption (W) & Time (sec.) & Energy (Joules) & Consumption (Kwh) \\ \hline
\multicolumn{4}{c}{\textbf{Population size = 100}}\\ %\hline
Raspberry Pi & 0.5 & 233.14 &116.57 & 3.24*$10^{-5}$ \\
Tablet & 0.63 & 132.75 & 83,3&2.31*$10^{-5}$ \\
Mac & 12.26 & 41.51 & 508,91&1.41*$10^{-4}$ \\
Laptop & 16.49 & 51.79 & 853.95& 2.37*$10^{-4}$ \\
Blade & 13.8 & 77.84 & 1074.19&2.98*$10^{-4}$ \\ \hline
\multicolumn{4}{c}{\textbf{Population size = 200}}\\ %\hline
Raspberry Pi &	0.5 &597.29 &298.64 & 8.30*${-5}$ \\
Tablet & 0.63 & 145.63 & 92.9&2.56*$10^{-5}$ \\
Mac & 14.87 & 110.58 & 1644.32&3.77*$10^{-4}$ \\
Laptop	& 17.38 & 132.88 & 2309.41&6.42*$10^{-4}$ \\
Blade & 18.71 & 206.48 & 3863.24&1.07*$10^{-3}$ \\ \hline
\multicolumn{4}{c}{\textbf{Population size = 400}}\\ %\hline
 RaspberryPi&0.5&1386.52& 693.26&1.93*$10^{-4}$ \\
Tablet &0.82&1070.26& 873.1&2.43*$10^{-4}$\\
Mac&17.49&269.38&4711.68&1.11*$10^{-3}$\\
Laptop&18.25&317.98&5803.17 &1.61*$10^{-3}$\\
Blade&21.17&503.33&10655.5&2.96*$10^{-3}$ \\ \hline
\multicolumn{4}{c}{\textbf{Population size = 500}}\\ %\hline
Raspberry Pi & 0.5&1833.07&916.53 &2.55*$10^{-4}$ \\
Tablet & 0.82 & 1085.17& 890.56&2.47*$10^{-4}$ \\
Mac & 18.75 & 352.31 & 6605.81&1.83*$10^{-3}$ \\
Laptop & 18.58 & 416.76 & 7743.73&2.15*$10^{-3}$ \\
Blade & 22.19 & 668.54 & 14834.90&4.12*$10^{-3}$ \\ \hline
\multicolumn{4}{c}{\textbf{Population size = 1000}}\\ %\hline
Raspberry Pi&0.5&3504.14& 1752.07&4.87*$10^{-4}$ \\
Tablet & 0.82 & 2060.85 & 1686.49&4.68*$10^{-4}$ \\
Mac &19.89 & 688.63 & 13696.85&3.80*$10^{-3}$ \\
Laptop &19.01&813.78& 15469.93&4.30*$10^{-3}$ \\
Blade &	17.1&1305.84& 22329.86&6.20*$10^{-3}$ \\ \hline

\end{tabular}
\end{table} 
\end{small}

%\begin{table}
%\renewcommand{\arraystretch}{1.3}
%\centering
%\caption{Resultados experimentales con tamaño de poblacion = 100.}
%\label{Table:result_100}
%\begin{tabular}{cccc}
%\hline
% Dispositivo & Consumo (W) & Tiempo (seg.) & Consumo (Kwh) \\ \hline
% Raspberry Pi & 0,32 & 109,89 &  $0,977*10^{-5}$ \\
% Laptop & 15,76 & 12,11 & $5,3*10^{-5}$ \\
% Smartphone & 0,26 & 65,75 & $0,48*10^{-5}$ \\
% FPGA & 1,990 & 306,12 & $56,405*10^{-5}$ \\ 
% \hline
%\end{tabular}
%\end{table} 


%\begin{table}
%\renewcommand{\arraystretch}{1.3}
%\centering
%\caption{Resultados experimentales con tamaño de poblacion = 500.}
%\label{Table:result_500}
%\begin{tabular}{cccc}
%\hline
% Dispositivo & Consumo (W) & Tiempo (seg.) & Consumo (Kwh) \\ \hline
% Raspberry Pi & 0,38 & 996,61 &  $10,520*10^{-5}$ \\
% Laptop & 18,6 & 87,16 & $45,034*10^{-5}$ \\
% Smartphone & 0,18 & 802,26 & $4,185*10^{-5}$ \\
%FPGA & 2,050 & & \\ 
%\end{tabular}
%\end{table}  


%\begin{table}
%\renewcommand{\arraystretch}{1.3}
%\centering
%\caption{Resultados experimentales con tamaño de poblacion = 1000.}
%\label{Table:result_1000}
%\begin{tabular}{cccc}
%\hline
% Dispositivo & Consumo (W) & Tiempo (seg.) & Consumo (Kwh) \\ \hline
% Raspberry Pi & 0,5 & 2572,8 &  $35,733*10^{-5}$ \\
% Laptop & 19,49 & 215,33 & $116,475*10^{-5}$ \\
% Smartphone & 0,22 & 2219,80 & $13,807*10^{-5}$ \\
%FPGA & 2,172 & & \\ 
%\end{tabular}
%\end{table}  

Las primeras conclusiones que podemos obtener, es que efectivamente, el hardware influye notablemente en la energía necesaria para encontrar una solución.  En todas las 
tablas de datos mostradas observamos que el equipo tipo PC consume mucha más potencia eléctrica que el resto de dispositivos.  Si nos fijamos por ejemplo en las ejecuciones con tamaños de población de 50 individuos el consumo es de 12,76 vatios en el laptop, frente a menos de 2 vatios para el resto;  en algunos casos la diferencia está en el orden de 40 veces más energía en cada instante de tiempo para el PC (frente a la raspberry, por ejemplo).  Sin embargo, y debido a la mayor potencia computacional del PC, el tiempo necesario hasta la solución es bastante más pequeño, como cabría esperar:  5 segundos en el caso del PC frente a los 41 y 35 respectivamente para la raspberry y el teléfono móvil, y más de 60 para la FPGA.  Pero si tenemos en cuenta ambos elementos, potencia consumida y tiempo de ejecución, para hacer un cálculo de kilovatios/hora, que es un dato objetivo resumido del consumo total para el algoritmo en cuestión, 
los datos siguen a favor de los dispositivos con menor capacidad de cómputo $0,370*10^{-5}$ y $0,272*10^{-5}$ Kwh para raspberry y Smartphone respectivamente frente a $1,81*10^{-5}$ Kwh en el PC y $3,33*10^{-5}$ en el caso de la FPGA.  Descartando la FPGA como dispositivo, dado en primer lugar 
su más difícil utilización, y por otro lado su mayor consumo, y fijándonos en el resto de dispositivos, podemos concluir que es, aproximadamente, 6 veces más costoso encontrar una solución para el problema en cuestión en un PC que en el resto de dispositivos.  

Similares conclusiones podemos obtener si analizamos los experimentos con mayor tamaño de población.  En el experimento con la mayor población utilizada, 1000 individuos, y descartando el interés de la FPGA por las razones ya expuestas, el
dispositivo que menos ejergía ha consumido para encontrar la solución es el Smartphone, con un consumo casi 10 veces inferior al PC, aunque el tiempo 
total ha sido 10 veces superior al del PC.  La raspberry ha sido el dispositivo más lento, algo más lento que el Smartphone, pero quedando en segundo lugar en 
cuanto a consumo, con $35,733*10^{-5}$ Kwh, doble que el Smartphone pero aproximadamente 3,3 veces inferior al consumo del PC.

Pero un análisis más profundo de los resultados nos suministra información interesante e inesperada.  Si comparamos el consumo instantaneo de energía para un mismo 
dispositivo, por ejemplo la raspberry, con los diferentes tamaños de población vemos que ese consumo varía, creciendo con el tamaño de población utilizado.  Así, el consumo 
varía desde 0,32 a 0,5 vatios cuando pasamos de 50 a 1000 individuos.  Teniendo en cuenta que el algoritmo es el mismo, y es un algoritmo secuencial, esta situación se 
revela inesperada. Es lógico que el tiempo de cómputo pueda variar entre ejecuciones con diferente tamaño de población, aunque la influencia de este parámetro en el tiempo 
hasta encontrar una solución no puede preveerse de antemano, dado el modo en que el algoritmo genético realiza la búsqueda de la misma en el espacio.  Así, el tamaño de la 
población puede influir positivamente en el proceso de búsqueda, aunque todo depende de la forma del \textit{fitness landscape}, y a la vez puede provocar un mayor tiempo 
de ejecución si esta ventaja en la búsqueda no es suficiente para compensar el mayor tiempo requerido para evaluar cada generación, elementos ambos que han sido estudiados 
en profundidad para diferentes algoritmos evolutivos \cite{cantupaz},\cite{fcofdez}.  Pero lo que no se había estudiado hasta ahora, ni siquera habíamos previsto antes de 
este trabajo, es que sin cambios en el algoritmo pudiera haber diferencias en el consumo instantaneo de potencia con un simple cambio en el tamaño de la población.

Aunque es prematuro, incluso aventurado, achacar la razón de estas diferencias a algún elemento concreto que interviene en el proceso, creemos que no debe la razón estar 
originada en el algoritmo, sino más bien en la arquitectura del sistema que ejecuta el mismo.  Como en todas las arquitecturas basadas en ARM-INTEL encontramos el mismo 
comportamiento, y los sistemas operativos que gestionan los procesos son basados en Linux, es posible que las diferencias se deban a la mejor o peor utilización de la 
jerarquía de memoria;  en particular es posible que el uso de la memoria caché sea más adecuado cuando el tamaño de la población es menor.  No obstante, esperamos poder 
estudiar esta y otras posibles fuentes de consumo de energía en próximos trabajos.